<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ph√¢n C√¥ng - UpFile System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="dashboard-header">
        <div class="brand-section">
            <div class="brand-logo">üöÄ UpFile <span style="font-size:0.9rem; opacity:0.7; font-weight:500;">/ Ph√¢n C√¥ng</span></div>
            <a href="index.html" class="btn btn-secondary btn-sm" style="margin-left:10px;"> Quay l·∫°i</a>
        </div>
        <div class="user-section">
            <div class="user-info-text">
                <span class="user-name" id="displayUserName">Admin</span>
                <span class="user-role-badge admin" id="displayUserRole">Admin</span>
            </div>
            <div class="user-avatar" id="userAvatar">A</div>
        </div>
    </header>

    <main class="main-container" style="padding-bottom: 90px;">
        
        <div class="card-box">
            <div class="card-header-title">1. Thi·∫øt l·∫≠p th√¥ng tin h·ªì s∆°</div>
            <div class="filter-grid" id="part1Container">
                <div class="filter-item">
                    <label>NƒÉm h·ªçc <span style="color:red">*</span></label>
                    <select id="selYear" class="required-select"></select>
                </div>
                <div class="filter-item">
                    <label>K·ª≥ ki·ªÉm tra <span style="color:red">*</span></label>
                    <select id="selFolder" class="required-select"></select>
                </div>
                <div class="filter-item">
                    <label>M√¥n h·ªçc <span style="color:red">*</span></label>
                    <select id="selSubject" class="required-select"></select>
                </div>
                <div class="filter-item">
                    <label>Kh·ªëi <span style="color:red">*</span></label>
                    <select id="selBlock" class="required-select"></select>
                </div>
                <div class="filter-item">
                    <label>ƒê·ªëi t∆∞·ª£ng <span style="color:red">*</span></label>
                    <select id="selObject" class="required-select"></select>
                </div>
            </div>
        </div>

        <div class="card-box section-disabled" id="part2Container">
            <div class="card-header-title" style="justify-content: space-between;">
                <span>2. Ch·ªçn Gi√°o vi√™n & N·ªôi dung n·ªôp</span>
                <small style="color:#666; font-weight:400; font-size:0.9rem;">T√≠ch ch·ªçn gi√°o vi√™n ƒë·ªÉ m·ªü n·ªôi dung</small>
            </div>
            
            <div class="assign-table-wrapper">
                <table class="assign-table">
                    <thead>
                        <tr>
                            <th style="width: 60px; text-align:center;">Ch·ªçn</th>
                            <th style="width: 250px;">Th√¥ng tin Gi√°o vi√™n (Upload)</th>
                            <th>N·ªôi dung (DocType) c·∫ßn n·ªôp</th>
                            <th style="width: 200px;">Ng∆∞·ªùi gi√°m s√°t</th>
                        </tr>
                    </thead>
                    <tbody id="teacherBody">
                        <tr>
                            <td colspan="4" style="text-align: center; padding: 40px; color:#999;">
                                <div class="spinner" style="margin:0 auto 10px;"></div>
                                ƒêang t·∫£i danh s√°ch...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <div class="sticky-footer">
        <button class="btn btn-secondary" onclick="window.location.href='index.html'">H·ªßy b·ªè</button>
        <button class="btn btn-primary" id="btnSave" onclick="handleSaveAssign()" disabled>üíæ X√°c nh·∫≠n & L∆∞u Ph√¢n c√¥ng</button>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userStr = localStorage.getItem('upfile_user');
            if (userStr) {
                const user = JSON.parse(userStr);
                if (user.Permissions !== 'Admin') {
                    showToast('B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y!', 'error');
                    setTimeout(() => window.location.href = 'index.html', 1500); 
                    return;
                }
            } else {
                window.location.href = 'login.html';
            }
            initAssignPage();
        });
    </script>
</body>
</html>
